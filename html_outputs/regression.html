<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>19 Hồi quy đơn và đa biến | Cẩm nang dịch tễ học với R</title>
<meta name="author" content="the handbook team">
<meta name="description" content="Trong chương này, chúng tôi trình bày cách sử dụng các hàm hồi quy trong base R rnhư hàm glm() và package gtsummary để xem xét các mối liên quan giữa các biến (ví dụ như tỷ số chênh, tỷ số nguy...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="19 Hồi quy đơn và đa biến | Cẩm nang dịch tễ học với R">
<meta property="og:type" content="book">
<meta property="og:description" content="Trong chương này, chúng tôi trình bày cách sử dụng các hàm hồi quy trong base R rnhư hàm glm() và package gtsummary để xem xét các mối liên quan giữa các biến (ví dụ như tỷ số chênh, tỷ số nguy...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="19 Hồi quy đơn và đa biến | Cẩm nang dịch tễ học với R">
<meta name="twitter:description" content="Trong chương này, chúng tôi trình bày cách sử dụng các hàm hồi quy trong base R rnhư hàm glm() và package gtsummary để xem xét các mối liên quan giữa các biến (ví dụ như tỷ số chênh, tỷ số nguy...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.19/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.5.1/plotly-basic-2.5.1.min.js"></script><script src="libs/plotly-cartesian-2.5.1/plotly-cartesian-2.5.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-8.1.2/highcharts.js"></script><script src="libs/highcharts-8.1.2/highcharts-3d.js"></script><script src="libs/highcharts-8.1.2/highcharts-more.js"></script><script src="libs/highcharts-8.1.2/modules/stock.js"></script><script src="libs/highcharts-8.1.2/modules/map.js"></script><script src="libs/highcharts-8.1.2/modules/annotations.js"></script><script src="libs/highcharts-8.1.2/modules/data.js"></script><script src="libs/highcharts-8.1.2/modules/drilldown.js"></script><script src="libs/highcharts-8.1.2/modules/item-series.js"></script><script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script><script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-8.1.2/modules/exporting.js"></script><script src="libs/highcharts-8.1.2/modules/export-data.js"></script><script src="libs/highcharts-8.1.2/modules/funnel.js"></script><script src="libs/highcharts-8.1.2/modules/heatmap.js"></script><script src="libs/highcharts-8.1.2/modules/treemap.js"></script><script src="libs/highcharts-8.1.2/modules/sankey.js"></script><script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script><script src="libs/highcharts-8.1.2/modules/organization.js"></script><script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script><script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script><script src="libs/highcharts-8.1.2/modules/sunburst.js"></script><script src="libs/highcharts-8.1.2/modules/vector.js"></script><script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script><script src="libs/highcharts-8.1.2/modules/xrange.js"></script><script src="libs/highcharts-8.1.2/modules/tilemap.js"></script><script src="libs/highcharts-8.1.2/modules/venn.js"></script><script src="libs/highcharts-8.1.2/modules/gantt.js"></script><script src="libs/highcharts-8.1.2/modules/timeline.js"></script><script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script><script src="libs/highcharts-8.1.2/modules/bullet.js"></script><script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script><script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script><script src="libs/highcharts-8.1.2/modules/lollipop.js"></script><script src="libs/highcharts-8.1.2/modules/series-label.js"></script><script src="libs/highcharts-8.1.2/plugins/motion.js"></script><script src="libs/highcharts-8.1.2/custom/reset.js"></script><script src="libs/highcharts-8.1.2/modules/boost.js"></script><script src="libs/highchart-binding-0.8.2/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Cẩm nang dịch tễ học với R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Về cuốn sách này</li>
<li><a class="" href="editorial-style.html"><span class="header-section-number">1</span> Biên tập và ghi chú kỹ thuật</a></li>
<li><a class="" href="data-used.html"><span class="header-section-number">2</span> Tải sách và dữ liệu</a></li>
<li class="book-part">Nhập môn về R</li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> R Cơ bản</a></li>
<li><a class="" href="transition-to-R.html"><span class="header-section-number">4</span> Chuyển đổi sang R</a></li>
<li><a class="" href="packages-suggested.html"><span class="header-section-number">5</span> Package đề xuất</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> Dự án R</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">7</span> Nhập xuất dữ liệu</a></li>
<li class="book-part">Quản lý dữ liệu</li>
<li><a class="" href="cleaning.html"><span class="header-section-number">8</span> Làm sạch số liệu và các hàm quan trọng</a></li>
<li><a class="" href="dates.html"><span class="header-section-number">9</span> Làm việc với ngày tháng</a></li>
<li><a class="" href="characters-strings.html"><span class="header-section-number">10</span> Ký tự và chuỗi</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Factors</a></li>
<li><a class="" href="pivoting.html"><span class="header-section-number">12</span> Xoay trục dữ liệu</a></li>
<li><a class="" href="grouping.html"><span class="header-section-number">13</span> Nhóm dữ liệu</a></li>
<li><a class="" href="joining-matching.html"><span class="header-section-number">14</span> Nối dữ liệu</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> Loại bỏ trùng lặp</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Lặp, vòng lặp, và danh sách</a></li>
<li class="book-part">Phân tích dữ liệu</li>
<li><a class="" href="tables-descriptive.html"><span class="header-section-number">17</span> Bảng mô tả</a></li>
<li><a class="" href="stat-tests.html"><span class="header-section-number">18</span> Các kiểm định thống kê cơ bản</a></li>
<li><a class="active" href="regression.html"><span class="header-section-number">19</span> Hồi quy đơn và đa biến</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Dữ liệu Missing</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">21</span> Tỷ suất chuẩn hóa</a></li>
<li><a class="" href="moving-average.html"><span class="header-section-number">22</span> Đường trung bình động</a></li>
<li><a class="" href="time-series.html"><span class="header-section-number">23</span> Chuỗi thời gian và phát hiện ổ dịch</a></li>
<li><a class="" href="epidemic-models.html"><span class="header-section-number">24</span> Mô hình hóa dịch bệnh</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">25</span> Truy vết tiếp xúc</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Phân tích khảo sát</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Phân tích sống còn</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> GIS cơ bản</a></li>
<li class="book-part">Trực quan hóa dữ liệu</li>
<li><a class="" href="tables-presentation.html"><span class="header-section-number">29</span> Trình bày bảng</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> ggplot cơ bản</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> Các tips với ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> Đường cong dịch bệnh</a></li>
<li><a class="" href="age-pyramid.html"><span class="header-section-number">33</span> Tháp dân số và thang đo Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Biểu đồ nhiệt</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> Sơ đồ và biểu đồ</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">36</span> Biểu đồ kết hợp</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> Chuỗi lây nhiễm</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">38</span> Cây phả hệ</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> Biểu đồ tương tác</a></li>
<li class="book-part">Báo cáo và dashboards</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> Báo cáo với R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> Tổ chức báo cáo định kỳ</a></li>
<li><a class="" href="flexdashboard.html"><span class="header-section-number">42</span> Dashboards với R Markdown</a></li>
<li><a class="" href="shiny-basics.html"><span class="header-section-number">43</span> Dashboards với Shiny</a></li>
<li class="book-part">Tổng hợp</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">44</span> Viết hàm</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> Tương tác với thư mục làm việc</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Version control với Git và Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> Các lỗi thường gặp</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> Nhờ sự trợ giúp</a></li>
<li><a class="" href="network-drives.html"><span class="header-section-number">49</span> R trên ổ cứng mạng</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="regression" class="section level1" number="19">
<h1>
<span class="header-section-number">19</span> Hồi quy đơn và đa biến<a class="anchor" aria-label="anchor" href="#regression"><i class="fas fa-link"></i></a>
</h1>
<!-- ======================================================= -->
<p>Trong chương này, chúng tôi trình bày cách sử dụng các hàm hồi quy trong <strong>base</strong> R rnhư hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> và package <strong>gtsummary</strong> để xem xét các mối liên quan giữa các biến (ví dụ như tỷ số chênh, tỷ số nguy cơ, tỷ số rủi ro). Chúng tôi cũng trình bày cách sử dụng các hàm như <code>tidy()</code> trong package <strong>broom</strong> để sắp xếp các kết quả hồi quy.</p>
<ol style="list-style-type: decimal">
<li>Phân tích đơn biến: bảng 2 x 2</li>
<li>Phân tích phân tầng: ước lượng của mantel-haenszel<br>
</li>
<li>Phân tích đa biến: lựa chọn biến số, lựa chọn mô hình, mô hình cuối cùng</li>
<li>Biểu đồ Forest plot</li>
</ol>
<p>Đối với hồi quy Cox, xem chương <a href="survival-analysis.html#survival-analysis">Phân tích sống còn</a>.</p>
<p><span style="color: black;"><strong><em>CHÚ Ý:</em></strong> Chúng tôi sử dụng thuật ngữ <em>đa biến (multivariable)</em> để nói đến một hồi quy có nhiều biến giải thích. Thuật ngữ này khác với mô hình <em>đa biến</em> (multivariate model), là một mô hình đa biến có nhiều biến kết cục – xem chi tiết trong <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3518362/">bài xã luận</a> này</span></p>
<!-- ======================================================= -->
<div id="chuẩn-bị-9" class="section level2" number="19.1">
<h2>
<span class="header-section-number">19.1</span> Chuẩn bị<a class="anchor" aria-label="anchor" href="#chu%E1%BA%A9n-b%E1%BB%8B-9"><i class="fas fa-link"></i></a>
</h2>
<div id="gọi-packages-5" class="section level3 unnumbered">
<h3>Gọi packages<a class="anchor" aria-label="anchor" href="#g%E1%BB%8Di-packages-5"><i class="fas fa-link"></i></a>
</h3>
<p>Đoạn mã này hiển thị cách tải các gói lệnh cần thiết cho phân tích. Trong cuốn sổ tay này, chúng tôi nhấn mạnh hàm <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> thuộc package <strong>pacman</strong>, giúp cài đặt package khi cần thiết <em>và</em> gọi nó ra để sử dụng. Có thể gọi các package đã cài đặt bằng hàm <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> trong <strong>base</strong> R. Xem thêm thông tin về các package của R trong chương <a href="basics.html#basics">R cơ bản</a>.</p>
<div class="sourceCode" id="cb959"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span>
  <span class="va">rio</span>,          <span class="co"># File import</span>
  <span class="va">here</span>,         <span class="co"># File locator</span>
  <span class="va">tidyverse</span>,    <span class="co"># data management + ggplot2 graphics, </span>
  <span class="va">stringr</span>,      <span class="co"># manipulate text strings </span>
  <span class="va">purrr</span>,        <span class="co"># loop over objects in a tidy way</span>
  <span class="va">gtsummary</span>,    <span class="co"># summary statistics and tests </span>
  <span class="va">broom</span>,        <span class="co"># tidy up results from regressions</span>
  <span class="va">lmtest</span>,       <span class="co"># likelihood-ratio tests</span>
  <span class="va">parameters</span>,   <span class="co"># alternative to tidy up results from regressions</span>
  <span class="va">see</span>          <span class="co"># alternative to visualise forest plots</span>
  <span class="op">)</span></code></pre></div>
</div>
<div id="nhập-số-liệu-1" class="section level3 unnumbered">
<h3>Nhập số liệu<a class="anchor" aria-label="anchor" href="#nh%E1%BA%ADp-s%E1%BB%91-li%E1%BB%87u-1"><i class="fas fa-link"></i></a>
</h3>
<p>Chúng tôi nhập bộ số liệu của các ca bệnh được mô phỏng từ một vụ dịch Ebola. Để tiện làm theo, <a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button">bấm để tải số liệu linelist “đã được làm sạch”</a> (dưới dạng tệp .rds ). Nhập số liệu này bằng hàm <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> trong package <strong>rio</strong> (nó chấp nhận nhiều loại tập tin như .xlsx, .rds, .csv – xem chi tiết trong chương <a href="importing.html#importing">Nhập xuất dữ liệu</a>).</p>
<div class="sourceCode" id="cb960"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># import the linelist</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></code></pre></div>
<p>Bên dưới là hiển thị của 50 hàng đầu tiên của bộ số liệu linelist.</p>
<div id="htmlwidget-6dfebd60ceaaeb94e673" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6dfebd60ceaaeb94e673">{"x":{"filter":"none","vertical":false,"data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="làm-sạch-số-liệu" class="section level3 unnumbered">
<h3>Làm sạch số liệu<a class="anchor" aria-label="anchor" href="#l%C3%A0m-s%E1%BA%A1ch-s%E1%BB%91-li%E1%BB%87u"><i class="fas fa-link"></i></a>
</h3>
<div id="lưu-trữ-các-biến-giải-thích" class="section level4 unnumbered">
<h4>Lưu trữ các biến giải thích<a class="anchor" aria-label="anchor" href="#l%C6%B0u-tr%E1%BB%AF-c%C3%A1c-bi%E1%BA%BFn-gi%E1%BA%A3i-th%C3%ADch"><i class="fas fa-link"></i></a>
</h4>
<p>Tên của các biến giải thích sẽ được lưu trữ dưới dạng một véc tơ ký tự. Véc tơ này sẽ được đề cập về sau.</p>
<div class="sourceCode" id="cb961"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## define variables of interest </span>
<span class="va">explanatory_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span><span class="op">)</span></code></pre></div>
</div>
<div id="chuyển-đổi-sang-số-1-và-số-0" class="section level4 unnumbered">
<h4>Chuyển đổi sang số 1 và số 0<a class="anchor" aria-label="anchor" href="#chuy%E1%BB%83n-%C4%91%E1%BB%95i-sang-s%E1%BB%91-1-v%C3%A0-s%E1%BB%91-0"><i class="fas fa-link"></i></a>
</h4>
<p>Sau đây, giá trị của các biến giải thích được chuyển đổi từ “có”/“không”, “nam”/“nữ” và “chết”/“sống” thành 1 / 0, để hợp với các đặc tính của mô hình hồi quy logistic. TĐể thực hiện việc này một cách hiệu quả, sử dụng hàm <code>across()</code> từ <strong>dplyr</strong> để chuyển đổi nhiều biến cùng một lúc. Để áp dụng cho mỗi biến, dùng hàm <code>case_when()</code> (cũng trong package <strong>dplyr</strong>) để chuyển đổi các giá trị cụ thể thành 1 và 0. Xem các mục về <code>across()</code> và <code>case_when()</code> trong chương <a href="cleaning.html#clean_across">Làm sạch số liệu và các hàm quan trọng</a>).</p>
<p>Chú ý: dấu “.” bên dưới đại diện cho cột`````<code>đang được xử lý trong hàm</code>across()` tại thời điểm đó.</p>
<div class="sourceCode" id="cb962"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert dichotomous variables to 0/1 </span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span>  
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span>                                      
    .cols <span class="op">=</span> <span class="fu">all_of</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">explanatory_vars</span>, <span class="st">"outcome"</span><span class="op">)</span><span class="op">)</span>,  <span class="co">## for each column listed and "outcome"</span>
    .fns <span class="op">=</span> <span class="op">~</span><span class="fu">case_when</span><span class="op">(</span>                              
      <span class="va">.</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"m"</span>, <span class="st">"yes"</span>, <span class="st">"Death"</span><span class="op">)</span>   <span class="op">~</span> <span class="fl">1</span>,           <span class="co">## recode male, yes and death to 1</span>
      <span class="va">.</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"f"</span>, <span class="st">"no"</span>,  <span class="st">"Recover"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>,           <span class="co">## female, no and recover to 0</span>
      <span class="cn">TRUE</span>                            <span class="op">~</span> <span class="cn">NA_real_</span><span class="op">)</span>    <span class="co">## otherwise set to missing</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
</div>
<div id="loại-bỏ-các-hàng-có-giá-trị-missing" class="section level4 unnumbered">
<h4>Loại bỏ các hàng có giá trị missing<a class="anchor" aria-label="anchor" href="#lo%E1%BA%A1i-b%E1%BB%8F-c%C3%A1c-h%C3%A0ng-c%C3%B3-gi%C3%A1-tr%E1%BB%8B-missing"><i class="fas fa-link"></i></a>
</h4>
<p>Để bỏ các hàng có giá trị missing, dùng hàm <code>drop_na()</code> trong package <strong>tidyr</strong>. Tuy nhiên, chúng ta chỉ muốn thực hiện điều này cho các hàng có giá trị missing đối với các cột đang được quan tâm.</p>
<p>Trước hết, chúng ta phải đảm bảo rằng vectơ <code>explanatory_vars</code> bao gồm các biến <code>age</code> (<code>age</code> có thể tạo ra một lỗi trong thao tác của hàm <code>case_when()</code> trước đó, mà chỉ dành cho biến nhị phân). Sau đó chúng ta pipe bộ dữ liệu <code>linelist</code> tới hàm <code>drop_na()</code> để bỏ các hàng có giá trị missing cho biến <code>outcome</code> hoặc bất kỳ biển giải thích <code>explanatory_vars</code> nào.</p>
<p>Trước khi thực hiện các lệnh này, kiểm tra số hàng trong bộ số liệu <code>linelist</code> bằng hàm <code><a href="https://rdrr.io/r/base/nrow.html">nrow(linelist)</a></code>.</p>
<div class="sourceCode" id="cb963"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## add in age_category to the explanatory vars </span>
<span class="va">explanatory_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">explanatory_vars</span>, <span class="st">"age_cat"</span><span class="op">)</span>

<span class="co">## drop rows with missing information for variables of interest </span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">drop_na</span><span class="op">(</span><span class="fu">any_of</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"outcome"</span>, <span class="va">explanatory_vars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Kiểm tra số hàng còn lại của <code>linelist</code> bằng hàm <code><a href="https://rdrr.io/r/base/nrow.html">nrow(linelist)</a></code>.</p>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="phân-tích-đơn-biến" class="section level2" number="19.2">
<h2>
<span class="header-section-number">19.2</span> Phân tích đơn biến<a class="anchor" aria-label="anchor" href="#ph%C3%A2n-t%C3%ADch-%C4%91%C6%A1n-bi%E1%BA%BFn"><i class="fas fa-link"></i></a>
</h2>
<p>Cũng giống như chương <a href="tables-descriptive.html#tables-descriptive">Bảng mô tả</a>, chúng ta cần xác định packahe nào trong R mà chúng ta muốn sử dụng. Chúng tôi trình bày hai chọn lựa để thực hiện các phân tích đơn biến:</p>
<ul>
<li>Dùng hàm có sẵn trong <strong>base</strong> để in nhanh kết quả ra console. Sử dụng package <strong>broom</strong> để làm gọn kết quả.<br>
</li>
<li>Dùng package <strong>gtsummary</strong> để lập mô hình và nhận các kết quả đầu ra sẵn sàng để công bố</li>
</ul>
<!-- ======================================================= --><div id="base-r-2" class="section level3 unnumbered">
<h3>
<strong>base</strong> R<a class="anchor" aria-label="anchor" href="#base-r-2"><i class="fas fa-link"></i></a>
</h3>
<div id="hồi-quy-tuyến-tính" class="section level4 unnumbered">
<h4>Hồi quy tuyến tính<a class="anchor" aria-label="anchor" href="#h%E1%BB%93i-quy-tuy%E1%BA%BFn-t%C3%ADnh"><i class="fas fa-link"></i></a>
</h4>
<p>Hàm <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> trong <strong>base</strong> cho phép thực hiện hồi quy tuyến tính để đánh giá mối quan hệ giữa biến đầu ra dạng số (numeric) và các biến giải thích mà được giả định là có mối quan hệ tuyến tính.</p>
<p>Cung cấp phương trình dưới dạng công thức với tên của biến đầu ra và các biến giải thích được phân tách bằng dấu ngã <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code>. Bên cạnh đó, chỉ rõ bộ số liệu nào được sử dụng với <code>data =</code>. Kết quả của mô hình được định nghĩa dưới dạng đối tượng của R để sử dụng về sau.</p>
<div class="sourceCode" id="cb964"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lm_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">ht_cm</span> <span class="op">~</span> <span class="va">age</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span></code></pre></div>
<p>Sau đó tóm tắt kết quả của mô hình bằng hàm <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> để xem các hệ số (ước tính), P-value, phần dư và các đo lường khác.</p>
<div class="sourceCode" id="cb965"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">lm_results</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = ht_cm ~ age, data = linelist)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -128.579  -15.854    1.177   15.887  175.483 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  69.9051     0.5979   116.9   &lt;2e-16 ***
## age           3.4354     0.0293   117.2   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 23.75 on 4165 degrees of freedom
## Multiple R-squared:  0.7675, Adjusted R-squared:  0.7674 
## F-statistic: 1.375e+04 on 1 and 4165 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Ngoài ra, có thể dùng hàm <code>tidy()</code> trong package <strong>broom</strong> để xuất kết quả vào trong một bảng. Kết quả bên dưới cho chúng ta biết khi tăng thêm một tuổi thì chiều cao tăng 3,5 cm và mối quan hệ này có ý nghĩa thống kê.</p>
<div class="sourceCode" id="cb967"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tidy</span><span class="op">(</span><span class="va">lm_results</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)    69.9     0.598       117.       0
## 2 age             3.44    0.0293      117.       0</code></pre>
<p>Sau đó, có thể sử dụng kết quả hồi quy này để đưa vào <strong>ggplot</strong>. Để thực hiện điều này, trước tiên chúng ta đưa các giá trị quan sát và đường thẳng hồi quy (fitted line) vào một data frame bằng cách dùng hàm <code>augment()</code> trong package <strong>broom</strong>.</p>
<div class="sourceCode" id="cb969"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## pull the regression points and observed data in to one dataset</span>
<span class="va">points</span> <span class="op">&lt;-</span> <span class="fu">augment</span><span class="op">(</span><span class="va">lm_results</span><span class="op">)</span>

<span class="co">## plot the data using age as the x-axis </span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">points</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co">## add points for height </span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">ht_cm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co">## add your regression line </span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">.fitted</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/lin_reg_res_plot-1.png" width="672"></div>
<p>Bạn cũng có thể vẽ đường hồi quy tuyến tính đơn bằng package <strong>ggplot</strong> thông qua hàm <code>geom_smooth()</code>.</p>
<div class="sourceCode" id="cb970"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## add your data to a plot </span>
 <span class="fu">ggplot</span><span class="op">(</span><span class="va">linelist</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">ht_cm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co">## show points</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co">## add a linear regression </span>
  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="_main_files/figure-html/geom_smooth-1.png" width="672"></div>
<p>Xem thêm các hướng dẫn chi tiết trong mục Nguồn ở cuối chương này.</p>
</div>
<div id="hồi-quy-logistic" class="section level4 unnumbered">
<h4>Hồi quy Logistic<a class="anchor" aria-label="anchor" href="#h%E1%BB%93i-quy-logistic"><i class="fas fa-link"></i></a>
</h4>
<p>Hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> trong package <strong>stats</strong> (một phần của <strong>base</strong> R) được sử dụng để fit (chọn mô hình dự đoán tối ưu dựa trên số liệu quan sát) đối với Mô hình Tuyến tính Tổng quát (GLM).</p>
<p><code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> có thể được sử dụng cho cả hồi quy logistic đơn biến và đa biến (ví dụ như để tính tỷ số chênh OR). Sau đây là những thành phần chính của hàm:</p>
<div class="sourceCode" id="cb972"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># arguments for glm()</span>
<span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">formula</span>, <span class="va">family</span>, <span class="va">data</span>, <span class="va">weights</span>, <span class="va">subset</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
<ul>
<li>
<code>formula =</code> Mô hình được cung cấp cho <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> dưới dạng một phương trình với biến kết cục ở bên trái và biến giải thích ở bên phải dấu ngã <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code>.<br>
</li>
<li>
<code>family =</code> Xác định loại mô hình sẽ thực hiện. Đối với hồi quy logistic, sử dụng <code>family = "binomial"</code>, đối với hồi quy poisson sử dụng <code>family = "poisson"</code>. Các ví dụ khác được trình bày trong bảng bên dưới.<br>
</li>
<li>
<code>data =</code> Cụ thể bộ số liệu</li>
</ul>
<p>Nếu cần, có thể cụ thể hàm liên kết bằng cú pháp <code>family = familytype(link = "linkfunction"))</code>. Bạn có thể tìm đọc thêm về các họ hồi quy khác và các tùy chọn đối số như là <code>weights =</code> và <code>subset =</code> bằng cách gõ (<code><a href="https://rdrr.io/r/stats/glm.html">?glm</a></code>).</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Họ</th>
<th>Hàm liên kết mặc định</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"binomial"</code></td>
<td><code>(link = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"gaussian"</code></td>
<td><code>(link = "identity")</code></td>
</tr>
<tr class="odd">
<td><code>"Gamma"</code></td>
<td><code>(link = "inverse")</code></td>
</tr>
<tr class="even">
<td><code>"inverse.gaussian"</code></td>
<td><code>(link = "1/mu^2")</code></td>
</tr>
<tr class="odd">
<td><code>"poisson"</code></td>
<td><code>(link = "log")</code></td>
</tr>
<tr class="even">
<td><code>"quasi"</code></td>
<td><code>(link = "identity", variance = "constant")</code></td>
</tr>
<tr class="odd">
<td><code>"quasibinomial"</code></td>
<td><code>(link = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"quasipoisson"</code></td>
<td><code>(link = "log")</code></td>
</tr>
</tbody>
</table></div>
<p>Khi thực hiện <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> , phổ biến nhất là lưu kết quả dưới dạng một đối tượng của R được đặt tên. Sau đó, có thể xuất kết quả ra console bằng cách sử dụng hàm <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> như được trình bày bên dưới, hoặc thực hiện các thao tác khác từ kết quả (ví dụ như lấy lũy thừa).</p>
<p>Nếu cần thực hiện một hồi quy nhị thức âm, có thể sử dụng package <strong>MASS</strong>. Hàn <code>glm.nb()</code> uses cũng sử dụng cùng cú pháp như <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>. Để xem qua các hồi quy khác, xem trên <a href="https://stats.idre.ucla.edu/other/dae/">trang thống kê của UCLA</a>.</p>
</div>
<div id="phân-tích-đơn-biến-sử-dụng-glm" class="section level4 unnumbered">
<h4>Phân tích đơn biến sử dụng <code>glm()</code><a class="anchor" aria-label="anchor" href="#ph%C3%A2n-t%C3%ADch-%C4%91%C6%A1n-bi%E1%BA%BFn-s%E1%BB%AD-d%E1%BB%A5ng-glm"><i class="fas fa-link"></i></a>
</h4>
<p>Trong ví dụ này, chúng tôi đánh giá mối liên quan giữa nhóm tuổi và biến kết cục tử vong (được mã hóa là 1 trong phần chuẩn bị). Bên dưới là một mô hình đơn biến của biến kết cục <code>outcome</code> theo <code>age_cat</code>. Chúng tôi lưu kết quả đầu ra được đặt tên là <code>model</code> và sau đó in kết quả đến console bằng hàm <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>. Lưu ý, các ước tính được tạo ra là các giá trị <em>lôgarít của tỷ số chênh (log odds)</em> và giá trị tham chiếu là giá trị đầu tiên của biến <code>age_cat</code> (“0-4”).</p>
<div class="sourceCode" id="cb973"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">age_cat</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ age_cat, family = "binomial", data = linelist)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -1.339  -1.278   1.024   1.080   1.354  
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)   
## (Intercept)   0.233738   0.072805   3.210  0.00133 **
## age_cat5-9   -0.062898   0.101733  -0.618  0.53640   
## age_cat10-14  0.138204   0.107186   1.289  0.19726   
## age_cat15-19 -0.005565   0.113343  -0.049  0.96084   
## age_cat20-29  0.027511   0.102133   0.269  0.78765   
## age_cat30-49  0.063764   0.113771   0.560  0.57517   
## age_cat50-69 -0.387889   0.259240  -1.496  0.13459   
## age_cat70+   -0.639203   0.915770  -0.698  0.48518   
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5705.1  on 4159  degrees of freedom
## AIC: 5721.1
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Để thay đổi giá trị tham chiếu của một biến Factor và chuyển giá trị mong muốn lên vị trí đầu tiên, dùng hàm <code>fct_relevel()</code> (xem chương <a href="factors.html#factors">Factors</a>). Ở ví dụ bên dưới, chúng tôi lấy biến <code>age_cat</code> và đặt nhóm tuổi “20-29” làm giá trị tham chiếu trước khi chuyển số liệu đã sửa đổi vào hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>.</p>
<div class="sourceCode" id="cb975"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>age_cat <span class="op">=</span> <span class="fu">fct_relevel</span><span class="op">(</span><span class="va">age_cat</span>, <span class="st">"20-29"</span>, after <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">outcome</span> <span class="op">~</span> <span class="va">age_cat</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ age_cat, family = "binomial", data = .)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -1.339  -1.278   1.024   1.080   1.354  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)   0.26125    0.07163   3.647 0.000265 ***
## age_cat0-4   -0.02751    0.10213  -0.269 0.787652    
## age_cat5-9   -0.09041    0.10090  -0.896 0.370220    
## age_cat10-14  0.11069    0.10639   1.040 0.298133    
## age_cat15-19 -0.03308    0.11259  -0.294 0.768934    
## age_cat30-49  0.03625    0.11302   0.321 0.748390    
## age_cat50-69 -0.41540    0.25891  -1.604 0.108625    
## age_cat70+   -0.66671    0.91568  -0.728 0.466546    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5705.1  on 4159  degrees of freedom
## AIC: 5721.1
## 
## Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div id="in-kết-quả" class="section level4 unnumbered">
<h4>In kết quả<a class="anchor" aria-label="anchor" href="#in-k%E1%BA%BFt-qu%E1%BA%A3"><i class="fas fa-link"></i></a>
</h4>
<p>Đối với hầu hết các mục đích sử dụng, kết quả đầu ra cần phải có một số sửa đổi. Hàm làm gọn <code>tidy()</code> trong package <strong>broom</strong> có những tiện lợi để hiển thị kết quả của mô hình.</p>
<p>Ở đây, chúng tôi trình bày cách để kết hợp các kết quả đầu ra của mô hình vào trong một bảng.</p>
<ol style="list-style-type: decimal">
<li>Lấy <em>lũy thừa</em> logarit của ước lượng tỉ số chênh OR và khoảng tin cậy bằng cách đưa mô hình vào hàm <code>tidy()</code> và thiết lập lũy thừa <code>exponentiate = TRUE</code> và <code>conf.int = TRUE</code>.</li>
</ol>
<div class="sourceCode" id="cb977"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">age_cat</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidy</span><span class="op">(</span>exponentiate <span class="op">=</span> <span class="cn">TRUE</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>        <span class="co"># exponentiate and produce CIs</span>
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">round</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># round all numeric columns</span></code></pre></div>
<p>Bên dưới là bảng kết quả đầu ra của <code>model</code>:</p>
<div id="htmlwidget-c9730f4210045be79cef" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c9730f4210045be79cef">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.26,0.94,1.15,0.99,1.03,1.07,0.68,0.53],[0.07,0.1,0.11,0.11,0.1,0.11,0.26,0.92],[3.21,-0.62,1.29,-0.05,0.27,0.56,-1.5,-0.7],[0,0.54,0.2,0.96,0.79,0.58,0.13,0.49],[1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07],[1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><ol start="2" style="list-style-type: decimal">
<li>Kết hợp các kết quả của mô hình vào trong một bảng đếm. Dưới đây, chúng tôi tạo một bảng đếm bằng hàm <code>tabyl()</code> từ package <strong>janitor</strong>, như được đề cập trong chương <a href="tables-descriptive.html#tables-descriptive">Bảng mô tả</a>.</li>
</ol>
<div class="sourceCode" id="cb978"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">counts_table</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/tabyl.html">tabyl</a></span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">outcome</span><span class="op">)</span></code></pre></div>
<!-- * Group rows by outcome, and get counts by age category   -->
<!-- * Pivot wider so the column are `age_cat`, `0`, and `1`   -->
<!-- * Remove row for `NA` `age_cat`, if applicable, to align with the model results   -->
<!-- ```{r} -->
<!-- counts_table <- linelist %>%  -->
<!--   filter(!is.na(outcome) & !is.na(age_cat)) %>%    # ensure outcome and age_cat are present  -->
<!--   group_by(outcome) %>%                            # get counts of variable of interest grouped by outcome -->
<!--   count(age_cat) %>%   ## gets number or rows by unique outcome-age category combinations   -->
<!--   pivot_wider(names_from = outcome, values_from = n)    ## spread data to wide format (as in cross-tabulation) -->
<!-- ``` -->
<p>Đây là cách mà bảng <code>counts_table</code> được hiển thị:</p>
<div id="htmlwidget-f6b02e8ae5a6beafd09c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f6b02e8ae5a6beafd09c">{"x":{"filter":"none","vertical":false,"data":[["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"],[338,365,273,238,345,228,35,3],[427,433,396,299,448,307,30,2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>age_cat<\/th>\n      <th>0<\/th>\n      <th>1<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Bây giờ chúng ta có thể nối bảng <code>counts_table</code> và kết quả của mô hình <code>model</code> lại với nhau theo chiều ngang bằng hàm nối cột <code>bind_cols()</code> (<strong>dplyr</strong>). Hãy nhớ rằng đối với hàm <code>bind_cols()</code> các hàng trong hai cấu trúc dữ liệu trên phải được căn chỉnh hoàn hảo. Trong đoạn code này, bởi vì chúng ta đang thực hiện một chuỗi các thuật toán pipe, chúng ta sử dụng dấu <code>.</code> để đại diện cho đối tượng được nối trong bảng đếm <code>counts_table</code> khi chúng tôi nối nó với kết quả mô hình <code>model</code>. Để kết thúc quy trình này, chúng ta sử dụng hàm <code>select()</code> để chọn các cột mong muốn và thứ tự của nó, và cuối cùng áp dụng hàm <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> trong <strong>base</strong> R để làm tròn với hai chữ số thập phân cho tất cả các cột.</p>
<div class="sourceCode" id="cb979"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">combined</span> <span class="op">&lt;-</span> <span class="va">counts_table</span> <span class="op">%&gt;%</span>           <span class="co"># begin with table of counts</span>
  <span class="fu">bind_cols</span><span class="op">(</span><span class="va">.</span>, <span class="va">model</span><span class="op">)</span> <span class="op">%&gt;%</span>              <span class="co"># combine with the outputs of the regression </span>
  <span class="fu">select</span><span class="op">(</span><span class="va">term</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="va">estimate</span>,          <span class="co"># select and re-order cols</span>
         <span class="va">conf.low</span>, <span class="va">conf.high</span>, <span class="va">p.value</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">round</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="co">## round to 2 decimal places</span></code></pre></div>
<p>Đây là hiển thị của cấu trúc đã được kết hợp, nó được xuất gọn gẽ dưới dạng một hình bằng thông qua một hàm trong package <strong>flextable</strong>. Chương <a href="tables-presentation.html#tables-presentation">Trình bày bảng</a> giải thích cách tùy chỉnh các bảng như vậy bằng <strong>flextable</strong>, hoặc có thể sử dụng các gói lệnh khác như <strong>knitr</strong> hoặc <strong>GT</strong>.</p>
<div class="sourceCode" id="cb980"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">combined</span> <span class="op">&lt;-</span> <span class="va">combined</span> <span class="op">%&gt;%</span> 
  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">qflextable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="vòng-lặp-cho-nhiều-mô-hình-đơn-biến" class="section level4 unnumbered">
<h4>Vòng lặp cho nhiều mô hình đơn biến<a class="anchor" aria-label="anchor" href="#v%C3%B2ng-l%E1%BA%B7p-cho-nhi%E1%BB%81u-m%C3%B4-h%C3%ACnh-%C4%91%C6%A1n-bi%E1%BA%BFn"><i class="fas fa-link"></i></a>
</h4>
<p>Sau đây chúng tôi trình bày một phương pháp sử dụng <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> và <code>tidy()</code> để có một cách tiếp cận đơn giản hơn, xem thêm ở phần <strong>gtsummary</strong>.</p>
<p>Để thực hiện các mô hình cho một số biến giải thích và cho ra các tỷ số chênh trong phân tích đơn biến (nghĩa là không có kiểm soát lẫn nhau), chúng ta có thể sử dụng các cách tiếp cận dưới đây. Sử dụng hàm <code>str_c()</code> từ package <strong>stringr</strong> để tạo ra các công thức cho phân tích đơn biến (xem chương <a href="characters-strings.html#characters-strings">Ký tự và chuỗi</a>), thực hiện hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> cho mỗi công thức, chuyển mỗi kết quả đầu ra của <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> đến hàm <code>tidy()</code> và cuối cùng thu gọn lại tất các kết quả đầu ra của mô hình bằng hàm nối dòng <code>bind_rows()</code> từ <strong>tidyr</strong>. Phương pháp này sử dụng hàm <code>map()</code> từ package <strong>purrr</strong> để lặp - xem chương [Lặp, vòng lặp và danh sách] để biết thêm thông tin về công cụ này.</p>
<ol style="list-style-type: decimal">
<li><p>Tạo một véctơ tên các cột của biến giải thích. Chúng ta đã tạo biến này <code>explanatory_vars</code> trong phần chuẩn bị của chương này.</p></li>
<li><p>Sử dụng hàm <code>str_c()</code> để tạo các công thức chuỗi với biến kết cục <code>outcome</code> ở bên trái và tên một cột của véctơ <code>explanatory_vars</code> ở bên phải. Dấu chấm <code>.</code> trong hàm này thay thế cho tên cột trong véctơ <code>explanatory_vars</code>.</p></li>
</ol>
<div class="sourceCode" id="cb981"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory_vars</span> <span class="op">%&gt;%</span> <span class="fu">str_c</span><span class="op">(</span><span class="st">"outcome ~ "</span>, <span class="va">.</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "outcome ~ gender"  "outcome ~ fever"   "outcome ~ chills"  "outcome ~ cough"   "outcome ~ aches"   "outcome ~ vomit"   "outcome ~ age_cat"</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>Đưa các công thức chuỗi này vào hàm <code>map()</code> và đặt <code>~glm()</code> làm hàm áp dụng cho mỗi đầu vào. Bên trong hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>, thiết lập công thức hồi quy <code><a href="https://rdrr.io/r/stats/formula.html">as.formula(.x)</a></code> trong đó <code>.x</code> sẽ được thay thế bằng các công thức chuỗi đã được tạo bên trên. Hàm <code>map()</code> sẽ lặp từng công thức chuỗi và thực hiện hồi quy cho từng công thức.</p></li>
<li><p>Kết quả đầu ra của hàm <code>map()</code> đầu tiên sẽ được chuyển đến hàm <code>map()</code> thứ hai mà sử dụng hàm <code>tidy()</code> để làm gọn các kết quả đầu ra.</p></li>
<li><p>Cuối cùng, kết quả đầu ra của hàm <code>map()</code> thứ hai (một danh sách các data frames đã được làm gọn) được tóm tắt bằng hàm nối dòng <code>bind_rows()</code>, kết quả cho ra một data frame với tất cả các kết quả đơn biến.</p></li>
</ol>
<div class="sourceCode" id="cb983"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">models</span> <span class="op">&lt;-</span> <span class="va">explanatory_vars</span> <span class="op">%&gt;%</span>       <span class="co"># begin with variables of interest</span>
  <span class="fu">str_c</span><span class="op">(</span><span class="st">"outcome ~ "</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span>         <span class="co"># combine each variable into formula ("outcome ~ variable of interest")</span>
  
  <span class="co"># iterate through each univariate formula</span>
  <span class="fu">map</span><span class="op">(</span>                               
    .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span>                       <span class="co"># pass the formulas one-by-one to glm()</span>
      formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,      <span class="co"># within glm(), the string formula is .x</span>
      family <span class="op">=</span> <span class="st">"binomial"</span>,           <span class="co"># specify type of glm (logistic)</span>
      data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>          <span class="co"># dataset</span>
  
  <span class="co"># tidy up each of the glm regression outputs from above</span>
  <span class="fu">map</span><span class="op">(</span>
    .f <span class="op">=</span> <span class="op">~</span><span class="fu">tidy</span><span class="op">(</span>
      <span class="va">.x</span>, 
      exponentiate <span class="op">=</span> <span class="cn">TRUE</span>,           <span class="co"># exponentiate </span>
      conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>          <span class="co"># return confidence intervals</span>
  
  <span class="co"># collapse the list of regression outputs in to one data frame</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># round all numeric columns</span>
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">round</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Lúc này, kết quả xuất ra của <code>models</code> dài hơn bởi vì kết quả bây giờ bao gồm các kết quả đầu ra của một số hồi quy đơn biến. Nhấp nút tiếp theo để xem tất cả các hàng của <code>model</code>.</p>
<div id="htmlwidget-c1ece69a8b1334a92343" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c1ece69a8b1334a92343">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","(Intercept)","fever","(Intercept)","chills","(Intercept)","cough","(Intercept)","aches","(Intercept)","vomit","(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.28,1,1.28,1,1.28,1.03,1.14,1.15,1.29,0.93,1.23,1.09,1.26,0.94,1.15,0.99,1.03,1.07,0.68,0.53],[0.04,0.06,0.07,0.08,0.03,0.08,0.08,0.09,0.03,0.1,0.04,0.06,0.07,0.1,0.11,0.11,0.1,0.11,0.26,0.92],[5.67,-0.04,3.44,0.01,6.98,0.41,1.53,1.58,7.78,-0.66,4.67,1.39,3.21,-0.62,1.29,-0.05,0.27,0.56,-1.5,-0.7],[0,0.97,0,0.99,0,0.68,0.13,0.11,0,0.51,0,0.17,0,0.54,0.2,0.96,0.79,0.58,0.13,0.49],[1.18,0.88,1.11,0.85,1.19,0.89,0.97,0.97,1.21,0.76,1.13,0.96,1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07],[1.4,1.13,1.48,1.17,1.37,1.21,1.34,1.37,1.38,1.14,1.34,1.23,1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Như lúc trước, chúng ta có thể tạo một bảng đếm từ bộ số liệu <code>linelist</code> cho mỗi biến giải thích, gắn chúng với <code>models</code>, và tạo ra một bảng đẹp. Chúng ta bắt đầu với các biến giải thích này, và lặp lại các biến này thông qua hàm <code>map()</code>. Chúng ta lặp lại qua một hàm do người dùng tạo ra mà liên quan đến việc tạo ra một bảng đếm bằng cách dùng các hàm trong package <strong>dplyr</strong> Sau đó, kết quả được kết nối trình tự với kết quả của mô hình <code>models</code>.</p>
<div class="sourceCode" id="cb984"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for each explanatory variable</span>
<span class="va">univ_tab_base</span> <span class="op">&lt;-</span> <span class="va">explanatory_vars</span> <span class="op">%&gt;%</span> 
  <span class="fu">map</span><span class="op">(</span>.f <span class="op">=</span> 
    <span class="op">~</span><span class="op">{</span><span class="va">linelist</span> <span class="op">%&gt;%</span>                <span class="co">## begin with linelist</span>
        <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span>     <span class="co">## group data set by outcome</span>
        <span class="fu">count</span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co">## produce counts for variable of interest</span>
        <span class="fu">pivot_wider</span><span class="op">(</span>              <span class="co">## spread to wide format (as in cross-tabulation)</span>
          names_from <span class="op">=</span> <span class="va">outcome</span>,
          values_from <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span> 
        <span class="fu">drop_na</span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>         <span class="co">## drop rows with missings</span>
        <span class="fu">rename</span><span class="op">(</span><span class="st">"variable"</span> <span class="op">=</span> <span class="va">.x</span><span class="op">)</span> <span class="op">%&gt;%</span>      <span class="co">## change variable of interest column to "variable"</span>
        <span class="fu">mutate</span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">variable</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> <span class="co">## convert to character, else non-dichotomous (categorical) variables come out as factor and cant be merged</span>
      <span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co">## collapse the list of count outputs in to one data frame</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co">## merge with the outputs of the regression </span>
  <span class="fu">bind_cols</span><span class="op">(</span><span class="va">.</span>, <span class="va">models</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co">## only keep columns interested in </span>
  <span class="fu">select</span><span class="op">(</span><span class="va">term</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="va">estimate</span>, <span class="va">conf.low</span>, <span class="va">conf.high</span>, <span class="va">p.value</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co">## round decimal places</span>
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">round</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Bên dưới là cấu trúc số liệu kết nối được tạo ra. Xem chương <a href="tables-presentation.html#tables-presentation">Trình bày bảng</a> để có thêm ý tưởng về cách chuyển đổi bảng số liệu này thành một bảng đẹp trên HTML (ví dụ như với package <strong>flextable</strong>).</p>
<div id="htmlwidget-d80806cfa81bdd3bcdd3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d80806cfa81bdd3bcdd3">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","(Intercept)","fever","(Intercept)","chills","(Intercept)","cough","(Intercept)","aches","(Intercept)","vomit","(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[909,916,340,1485,1472,353,272,1553,1636,189,931,894,338,365,273,238,345,228,35,3],[1168,1174,436,1906,1877,465,309,2033,2114,228,1144,1198,427,433,396,299,448,307,30,2],[1.28,1,1.28,1,1.28,1.03,1.14,1.15,1.29,0.93,1.23,1.09,1.26,0.94,1.15,0.99,1.03,1.07,0.68,0.53],[1.18,0.88,1.11,0.85,1.19,0.89,0.97,0.97,1.21,0.76,1.13,0.96,1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07],[1.4,1.13,1.48,1.17,1.37,1.21,1.34,1.37,1.38,1.14,1.34,1.23,1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2],[0,0.97,0,0.99,0,0.68,0.13,0.11,0,0.51,0,0.17,0,0.54,0.2,0.96,0.79,0.58,0.13,0.49]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>0<\/th>\n      <th>1<\/th>\n      <th>estimate<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n      <th>p.value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="reg_gt_uni" class="section level3 unnumbered">
<h3>
<strong>gtsummary</strong> package<a class="anchor" aria-label="anchor" href="#reg_gt_uni"><i class="fas fa-link"></i></a>
</h3>
<p>Sau đây chúng tôi sẽ trình bày cách sử dụng hàm <code>tbl_uvregression()</code> từ package <strong>gtsummary</strong>. Cũng giống như trong chương <a href="https://epirhandbook.com/descriptive-tables.html">Bảng mô tả</a>, các hàm trong <strong>gtsummary</strong> thực hiện tốt các thống kê <em>và</em> xuất ra các kết quả khá chuyên nghiệp. Hàm này xuất ra một bảng kết quả của hồi quy đơn biến.</p>
<p>Chúng ta chỉ chọn các cột cần thiết từ bộ số liệu <code>linelist</code> (ecác biến giải thích và biến kết cục) và pipe chúng vào hàm <code>tbl_uvregression()</code>. Chúng ta sẽ thực hiện hồi quy đơn biến cho mỗi cột như được xác định trong véctơ <code>explanatory_vars</code> trong mục Chuẩn bị (gender, fever, chills, cough, aches, vomit, và age_cat).</p>
<p>Trong hàm này, chúng ta cung cấp thêm phương pháp thực hiện <code>method =</code> là <code>glm</code> (không có dấu ngoặc kép), biến kết cục <code>y =</code> cột kết quả (biến <code>outcome</code>), cụ thể <code>method.args =</code> mà chúng ta muốn thực hiện hồi quy logistic qua <code>family = binomial</code>, và lấy lũy thừa của kết quả.</p>
<p>Kết quả đầu ra dưới dạng HTML và chứa cột đếm</p>
<div class="sourceCode" id="cb985"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">univ_tab</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">explanatory_vars</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">## select variables of interest</span>

  <span class="fu">tbl_uvregression</span><span class="op">(</span>                         <span class="co">## produce univariate table</span>
    method <span class="op">=</span> <span class="va">glm</span>,                           <span class="co">## define regression want to run (generalised linear model)</span>
    y <span class="op">=</span> <span class="va">outcome</span>,                            <span class="co">## define outcome variable</span>
    method.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span>,  <span class="co">## define what type of glm want to run (logistic)</span>
    exponentiate <span class="op">=</span> <span class="cn">TRUE</span>                     <span class="co">## exponentiate to produce odds ratios (rather than log odds)</span>
  <span class="op">)</span>

<span class="co">## view univariate results table </span>
<span class="va">univ_tab</span></code></pre></div>
<div id="avtlldlmha" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#avtlldlmha .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#avtlldlmha .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#avtlldlmha .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#avtlldlmha .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#avtlldlmha .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#avtlldlmha .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#avtlldlmha .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#avtlldlmha .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#avtlldlmha .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#avtlldlmha .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#avtlldlmha .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#avtlldlmha .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#avtlldlmha .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#avtlldlmha .gt_from_md > :first-child {
  margin-top: 0;
}

#avtlldlmha .gt_from_md > :last-child {
  margin-bottom: 0;
}

#avtlldlmha .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#avtlldlmha .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#avtlldlmha .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#avtlldlmha .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#avtlldlmha .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#avtlldlmha .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#avtlldlmha .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#avtlldlmha .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#avtlldlmha .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#avtlldlmha .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#avtlldlmha .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#avtlldlmha .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#avtlldlmha .gt_left {
  text-align: left;
}

#avtlldlmha .gt_center {
  text-align: center;
}

#avtlldlmha .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#avtlldlmha .gt_font_normal {
  font-weight: normal;
}

#avtlldlmha .gt_font_bold {
  font-weight: bold;
}

#avtlldlmha .gt_font_italic {
  font-style: italic;
}

#avtlldlmha .gt_super {
  font-size: 65%;
}

#avtlldlmha .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">gender</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.88, 1.13</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left">fever</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.85, 1.17</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left">chills</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.89, 1.21</td>
<td class="gt_row gt_center">0.7</td>
</tr>
<tr>
<td class="gt_row gt_left">cough</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.97, 1.37</td>
<td class="gt_row gt_center">0.11</td>
</tr>
<tr>
<td class="gt_row gt_left">aches</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.76, 1.14</td>
<td class="gt_row gt_center">0.5</td>
</tr>
<tr>
<td class="gt_row gt_left">vomit</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.09</td>
<td class="gt_row gt_center">0.96, 1.23</td>
<td class="gt_row gt_center">0.2</td>
</tr>
<tr>
<td class="gt_row gt_left">age_cat</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0-4</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">5-9</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.94</td>
<td class="gt_row gt_center">0.77, 1.15</td>
<td class="gt_row gt_center">0.5</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">10-14</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.93, 1.42</td>
<td class="gt_row gt_center">0.2</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">15-19</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.99</td>
<td class="gt_row gt_center">0.80, 1.24</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">20-29</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.84, 1.26</td>
<td class="gt_row gt_center">0.8</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">30-49</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.07</td>
<td class="gt_row gt_center">0.85, 1.33</td>
<td class="gt_row gt_center">0.6</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">50-69</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.68</td>
<td class="gt_row gt_center">0.41, 1.13</td>
<td class="gt_row gt_center">0.13</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">70+</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.53</td>
<td class="gt_row gt_center">0.07, 3.20</td>
<td class="gt_row gt_center">0.5</td>
</tr>
</tbody>
<tfoot><tr class="gt_footnotes">
<td colspan="5">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks"><em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br></p>
      </td>
    </tr></tfoot>
</table></div>
</div>
<p>Chúng ta có thể sửa đổi đối với kết quả đầu ra của bảng này, ví dụ như điều chỉnh các nhãn, tô đậm các hàng theo giá trị p, .v.v. Xem hướng dẫn <a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">tại đây</a> và các tài liệu trực tuyến khác.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="phân-tích-phân-tầng" class="section level2" number="19.3">
<h2>
<span class="header-section-number">19.3</span> Phân tích phân tầng<a class="anchor" aria-label="anchor" href="#ph%C3%A2n-t%C3%ADch-ph%C3%A2n-t%E1%BA%A7ng"><i class="fas fa-link"></i></a>
</h2>
<p>Hiện tại, phân tích phần tầng sử dụng package <strong>gtsummary</strong> đang được xây dựng, phần này sẽ được cập nhật trong thời gian thích hợp.</p>
</div>
<div id="phân-tích-đa-biến" class="section level2" number="19.4">
<h2>
<span class="header-section-number">19.4</span> Phân tích đa biến<a class="anchor" aria-label="anchor" href="#ph%C3%A2n-t%C3%ADch-%C4%91a-bi%E1%BA%BFn"><i class="fas fa-link"></i></a>
</h2>
<p>Đối với phân tích đa biến, chúng tôi trình bày hai cách tiếp cận:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> và <code>tidy()</code><br>
</li>
<li>Package <strong>gtsummary</strong>
</li>
</ul>
<p>Quy trình thực hiện khá tương tự và chỉ khác ở bước cuối cùng để kết nối kết quả lại với nhau.</p>
<div id="thực-hiện-phân-tích-đa-biến" class="section level3 unnumbered">
<h3>Thực hiện phân tích đa biến<a class="anchor" aria-label="anchor" href="#th%E1%BB%B1c-hi%E1%BB%87n-ph%C3%A2n-t%C3%ADch-%C4%91a-bi%E1%BA%BFn"><i class="fas fa-link"></i></a>
</h3>
<p>Ở đây chúng tôi sử dụng hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> nhưng thêm nhiều biến hơn vào bên phải của phương trình và được phân tách với nhau bằng dấu cộng (<code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>).</p>
<p>Để thực hiện mô hình với tất cả các biến giải thích, chúng ta thực hiện lệnh sau:</p>
<div class="sourceCode" id="cb986"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mv_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">fever</span> <span class="op">+</span> <span class="va">chills</span> <span class="op">+</span> <span class="va">cough</span> <span class="op">+</span> <span class="va">aches</span> <span class="op">+</span> <span class="va">vomit</span> <span class="op">+</span> <span class="va">age_cat</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mv_reg</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ gender + fever + chills + cough + aches + 
##     vomit + age_cat, family = "binomial", data = linelist)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -1.383  -1.279   1.029   1.078   1.346  
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept)   0.069054   0.131726   0.524    0.600
## gender        0.002448   0.065133   0.038    0.970
## fever         0.004309   0.080522   0.054    0.957
## chills        0.034112   0.078924   0.432    0.666
## cough         0.138584   0.089909   1.541    0.123
## aches        -0.070705   0.104078  -0.679    0.497
## vomit         0.086098   0.062618   1.375    0.169
## age_cat5-9   -0.063562   0.101851  -0.624    0.533
## age_cat10-14  0.136372   0.107275   1.271    0.204
## age_cat15-19 -0.011074   0.113640  -0.097    0.922
## age_cat20-29  0.026552   0.102780   0.258    0.796
## age_cat30-49  0.059569   0.116402   0.512    0.609
## age_cat50-69 -0.388964   0.262384  -1.482    0.138
## age_cat70+   -0.647443   0.917375  -0.706    0.480
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5700.2  on 4153  degrees of freedom
## AIC: 5728.2
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Nếu muốn bao gồm hai biến và tương tác của hai biến này, chúng ta có thể phân tách chúng bằng dấu hoa thị <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> thay cho dấu <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>. Nếu chúng ta chỉ muốn cụ thể sự tương tác, phân tách chúng bằng dấu hai chấm <code><a href="https://rdrr.io/r/base/Colon.html">:</a></code>. Ví dụ:</p>
<div class="sourceCode" id="cb988"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">age_cat</span> <span class="op">*</span> <span class="va">fever</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span></code></pre></div>
<p><em>Một tùy chọn khác</em>, chúng ta có thể sử dụng đoạn mã này để sử dụng một véc tơ đã được định nghĩa trước của các cột và tạo lại lệnh trên bằng cách sử dụng hàm <code>str_c()</code>. Điều này có thể hữu ích nếu chúng ta thay đổi tên các biến giải thích, hoặc bạn không muốn gõ lại tất cả mọi thứ.</p>
<div class="sourceCode" id="cb989"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## run a regression with all variables of interest </span>
<span class="va">mv_reg</span> <span class="op">&lt;-</span> <span class="va">explanatory_vars</span> <span class="op">%&gt;%</span>  <span class="co">## begin with vector of explanatory column names</span>
  <span class="fu">str_c</span><span class="op">(</span>collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span>     <span class="co">## combine all names of the variables of interest separated by a plus</span>
  <span class="fu">str_c</span><span class="op">(</span><span class="st">"outcome ~ "</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co">## combine the names of variables of interest with outcome in formula style</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"binomial"</span>,      <span class="co">## define type of glm as logistic,</span>
      data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span>          <span class="co">## define your dataset</span></code></pre></div>
<div id="xây-dựng-mô-hình" class="section level4 unnumbered">
<h4>Xây dựng mô hình<a class="anchor" aria-label="anchor" href="#x%C3%A2y-d%E1%BB%B1ng-m%C3%B4-h%C3%ACnh"><i class="fas fa-link"></i></a>
</h4>
<p>Chúng ta có thể xây dựng mô hình theo từng bước, lưu các mô hình khác nhau với một số biến giải thích. Chúng ta có thể sử dụng kiểm định tỷ số khả dĩ (likelihood-ratio tests) để so sánh các mô hình này bằng cách sử dụng hàm <code>lrtest()</code> từ package <strong>lmtest</strong>, như dưới đây:</p>
<p><span style="color: black;"><strong><em>CHÚ Ý:</em></strong> Sử dụng hàn <code>anova(model1, model2, test = "Chisq)</code> trong <strong>base</strong> R cũng cho kết quả tương tự</span></p>
<div class="sourceCode" id="cb990"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">age_cat</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span>
<span class="va">model2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">age_cat</span> <span class="op">+</span> <span class="va">gender</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span>

<span class="fu">lmtest</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/lrtest.html">lrtest</a></span><span class="op">(</span><span class="va">model1</span>, <span class="va">model2</span><span class="op">)</span></code></pre></div>
<pre><code>## Likelihood ratio test
## 
## Model 1: outcome ~ age_cat
## Model 2: outcome ~ age_cat + gender
##   #Df  LogLik Df  Chisq Pr(&gt;Chisq)
## 1   8 -2852.6                     
## 2   9 -2852.6  1 0.0002     0.9883</code></pre>
<p>Một tùy chọn khác là lấy đối tượng của mô hình và sử dụng hàm <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> từ package <strong>stats</strong>. Chỉ rõ hướng lựa chọn biến mà chúng ta muốn sử dụng khi xây dựng mô hình.</p>
<div class="sourceCode" id="cb992"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## choose a model using forward selection based on AIC</span>
<span class="co">## you can also do "backward" or "both" by adjusting the direction</span>
<span class="va">final_mv_reg</span> <span class="op">&lt;-</span> <span class="va">mv_reg</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/step.html">step</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="st">"forward"</span>, trace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>Để hiển thị rõ số, chúng ta có thể tắt ký hiệu khoa học trong R bằng lệnh sau</p>
<div class="sourceCode" id="cb993"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>scipen<span class="op">=</span><span class="fl">999</span><span class="op">)</span></code></pre></div>
<p>Như được mô tả trong phần phân tích đơn biến, chuyển kết quả đầu ra của mô hình vào hàm <code>tidy()</code> để lấy lũy thừa cho các hệ số và khoảng tin cậy (CIs). Cuối cùng, làm tròn tất cả các cột số với hai số thập phân. Kéo qua để xem tất cả các hàng.</p>
<div class="sourceCode" id="cb994"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mv_tab_base</span> <span class="op">&lt;-</span> <span class="va">final_mv_reg</span> <span class="op">%&gt;%</span> 
  <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span>exponentiate <span class="op">=</span> <span class="cn">TRUE</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co">## get a tidy dataframe of estimates </span>
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">round</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>          <span class="co">## round </span></code></pre></div>
<p>Đây là hiển thị kết quả dưới dạng data frame looks:</p>
<div id="htmlwidget-6d65c50120fcd0a94bd1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6d65c50120fcd0a94bd1">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","fever","chills","cough","aches","vomit","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.07,1,1,1.03,1.15,0.93,1.09,0.94,1.15,0.99,1.03,1.06,0.68,0.52],[0.13,0.07,0.08,0.08,0.09,0.1,0.06,0.1,0.11,0.11,0.1,0.12,0.26,0.92],[0.52,0.04,0.05,0.43,1.54,-0.68,1.37,-0.62,1.27,-0.1,0.26,0.51,-1.48,-0.71],[0.6,0.97,0.96,0.67,0.12,0.5,0.17,0.53,0.2,0.92,0.8,0.61,0.14,0.48],[0.83,0.88,0.86,0.89,0.96,0.76,0.96,0.77,0.93,0.79,0.84,0.85,0.4,0.07],[1.39,1.14,1.18,1.21,1.37,1.14,1.23,1.15,1.41,1.24,1.26,1.33,1.13,3.19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="gộp-kết-quả-phân-tích-đơn-biến-và-đa-biến" class="section level3 unnumbered">
<h3>Gộp kết quả phân tích đơn biến và đa biến<a class="anchor" aria-label="anchor" href="#g%E1%BB%99p-k%E1%BA%BFt-qu%E1%BA%A3-ph%C3%A2n-t%C3%ADch-%C4%91%C6%A1n-bi%E1%BA%BFn-v%C3%A0-%C4%91a-bi%E1%BA%BFn"><i class="fas fa-link"></i></a>
</h3>
<div id="gộp-bằng-package-gtsummary" class="section level4 unnumbered">
<h4>Gộp bằng package <strong>gtsummary</strong><a class="anchor" aria-label="anchor" href="#g%E1%BB%99p-b%E1%BA%B1ng-package-gtsummary"><i class="fas fa-link"></i></a>
</h4>
<p>Hàm <code>tbl_regression()</code> trong package <strong>gtsummary</strong> sẽ lấy kết quả đầu tra từ một hồi quy (hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> trong trường hợp này) và tạo ra một bảng tóm tắt đẹp.</p>
<div class="sourceCode" id="cb995"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## show results table of final regression </span>
<span class="va">mv_tab</span> <span class="op">&lt;-</span> <span class="fu">tbl_regression</span><span class="op">(</span><span class="va">final_mv_reg</span>, exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Hãy xem bảng sau:</p>
<div class="sourceCode" id="cb996"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mv_tab</span></code></pre></div>
<div id="itfhewfnzb" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#itfhewfnzb .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#itfhewfnzb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itfhewfnzb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#itfhewfnzb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#itfhewfnzb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itfhewfnzb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itfhewfnzb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#itfhewfnzb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#itfhewfnzb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#itfhewfnzb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#itfhewfnzb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#itfhewfnzb .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#itfhewfnzb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#itfhewfnzb .gt_from_md > :first-child {
  margin-top: 0;
}

#itfhewfnzb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#itfhewfnzb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#itfhewfnzb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#itfhewfnzb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itfhewfnzb .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#itfhewfnzb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itfhewfnzb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#itfhewfnzb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#itfhewfnzb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itfhewfnzb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itfhewfnzb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#itfhewfnzb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itfhewfnzb .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#itfhewfnzb .gt_left {
  text-align: left;
}

#itfhewfnzb .gt_center {
  text-align: center;
}

#itfhewfnzb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#itfhewfnzb .gt_font_normal {
  font-weight: normal;
}

#itfhewfnzb .gt_font_bold {
  font-weight: bold;
}

#itfhewfnzb .gt_font_italic {
  font-style: italic;
}

#itfhewfnzb .gt_super {
  font-size: 65%;
}

#itfhewfnzb .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">gender</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.88, 1.14</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left">fever</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.86, 1.18</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left">chills</td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.89, 1.21</td>
<td class="gt_row gt_center">0.7</td>
</tr>
<tr>
<td class="gt_row gt_left">cough</td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.96, 1.37</td>
<td class="gt_row gt_center">0.12</td>
</tr>
<tr>
<td class="gt_row gt_left">aches</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.76, 1.14</td>
<td class="gt_row gt_center">0.5</td>
</tr>
<tr>
<td class="gt_row gt_left">vomit</td>
<td class="gt_row gt_center">1.09</td>
<td class="gt_row gt_center">0.96, 1.23</td>
<td class="gt_row gt_center">0.2</td>
</tr>
<tr>
<td class="gt_row gt_left">age_cat</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0-4</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">5-9</td>
<td class="gt_row gt_center">0.94</td>
<td class="gt_row gt_center">0.77, 1.15</td>
<td class="gt_row gt_center">0.5</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">10-14</td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.93, 1.41</td>
<td class="gt_row gt_center">0.2</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">15-19</td>
<td class="gt_row gt_center">0.99</td>
<td class="gt_row gt_center">0.79, 1.24</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">20-29</td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.84, 1.26</td>
<td class="gt_row gt_center">0.8</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">30-49</td>
<td class="gt_row gt_center">1.06</td>
<td class="gt_row gt_center">0.85, 1.33</td>
<td class="gt_row gt_center">0.6</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">50-69</td>
<td class="gt_row gt_center">0.68</td>
<td class="gt_row gt_center">0.40, 1.13</td>
<td class="gt_row gt_center">0.14</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">70+</td>
<td class="gt_row gt_center">0.52</td>
<td class="gt_row gt_center">0.07, 3.19</td>
<td class="gt_row gt_center">0.5</td>
</tr>
</tbody>
<tfoot><tr class="gt_footnotes">
<td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks"><em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br></p>
      </td>
    </tr></tfoot>
</table></div>
</div>
<p>Chúng ta cũng có thể kết hợp một số bảng kết quả đầu ra bằng cách dùng hàm <code>tbl_merge()</code> trong package <strong>gtsummary</strong>. Bây giờ chúng ta hộp các kết quả đa biến với kết quả <em>đơn biến</em> đã được tạo <a href="regression.html#reg_gt_uni">bên trên</a> bằng package <strong>gtsummary</strong>:</p>
<div class="sourceCode" id="cb997"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## combine with univariate results </span>
<span class="fu">tbl_merge</span><span class="op">(</span>
  tbls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">univ_tab</span>, <span class="va">mv_tab</span><span class="op">)</span>,                          <span class="co"># combine</span>
  tab_spanner <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"**Univariate**"</span>, <span class="st">"**Multivariable**"</span><span class="op">)</span><span class="op">)</span> <span class="co"># set header names</span></code></pre></div>
<div id="gsxnjheymu" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#gsxnjheymu .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gsxnjheymu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gsxnjheymu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gsxnjheymu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gsxnjheymu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gsxnjheymu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gsxnjheymu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gsxnjheymu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gsxnjheymu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gsxnjheymu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gsxnjheymu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gsxnjheymu .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#gsxnjheymu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gsxnjheymu .gt_from_md > :first-child {
  margin-top: 0;
}

#gsxnjheymu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gsxnjheymu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gsxnjheymu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#gsxnjheymu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gsxnjheymu .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#gsxnjheymu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gsxnjheymu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gsxnjheymu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gsxnjheymu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gsxnjheymu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gsxnjheymu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#gsxnjheymu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gsxnjheymu .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#gsxnjheymu .gt_left {
  text-align: left;
}

#gsxnjheymu .gt_center {
  text-align: center;
}

#gsxnjheymu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gsxnjheymu .gt_font_normal {
  font-weight: normal;
}

#gsxnjheymu .gt_font_bold {
  font-weight: bold;
}

#gsxnjheymu .gt_font_italic {
  font-style: italic;
}

#gsxnjheymu .gt_super {
  font-size: 65%;
}

#gsxnjheymu .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings">
<tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4">
        <span class="gt_column_spanner"><strong>Univariate</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3">
        <span class="gt_column_spanner"><strong>Multivariable</strong></span>
      </th>
    </tr>
<tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">gender</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.88, 1.13</td>
<td class="gt_row gt_center">&gt;0.9</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.88, 1.14</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left">fever</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.85, 1.17</td>
<td class="gt_row gt_center">&gt;0.9</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.86, 1.18</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left">chills</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.89, 1.21</td>
<td class="gt_row gt_center">0.7</td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.89, 1.21</td>
<td class="gt_row gt_center">0.7</td>
</tr>
<tr>
<td class="gt_row gt_left">cough</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.97, 1.37</td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.96, 1.37</td>
<td class="gt_row gt_center">0.12</td>
</tr>
<tr>
<td class="gt_row gt_left">aches</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.76, 1.14</td>
<td class="gt_row gt_center">0.5</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.76, 1.14</td>
<td class="gt_row gt_center">0.5</td>
</tr>
<tr>
<td class="gt_row gt_left">vomit</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center">1.09</td>
<td class="gt_row gt_center">0.96, 1.23</td>
<td class="gt_row gt_center">0.2</td>
<td class="gt_row gt_center">1.09</td>
<td class="gt_row gt_center">0.96, 1.23</td>
<td class="gt_row gt_center">0.2</td>
</tr>
<tr>
<td class="gt_row gt_left">age_cat</td>
<td class="gt_row gt_center">4167</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0-4</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">5-9</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.94</td>
<td class="gt_row gt_center">0.77, 1.15</td>
<td class="gt_row gt_center">0.5</td>
<td class="gt_row gt_center">0.94</td>
<td class="gt_row gt_center">0.77, 1.15</td>
<td class="gt_row gt_center">0.5</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">10-14</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.93, 1.42</td>
<td class="gt_row gt_center">0.2</td>
<td class="gt_row gt_center">1.15</td>
<td class="gt_row gt_center">0.93, 1.41</td>
<td class="gt_row gt_center">0.2</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">15-19</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.99</td>
<td class="gt_row gt_center">0.80, 1.24</td>
<td class="gt_row gt_center">&gt;0.9</td>
<td class="gt_row gt_center">0.99</td>
<td class="gt_row gt_center">0.79, 1.24</td>
<td class="gt_row gt_center">&gt;0.9</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">20-29</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.84, 1.26</td>
<td class="gt_row gt_center">0.8</td>
<td class="gt_row gt_center">1.03</td>
<td class="gt_row gt_center">0.84, 1.26</td>
<td class="gt_row gt_center">0.8</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">30-49</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.07</td>
<td class="gt_row gt_center">0.85, 1.33</td>
<td class="gt_row gt_center">0.6</td>
<td class="gt_row gt_center">1.06</td>
<td class="gt_row gt_center">0.85, 1.33</td>
<td class="gt_row gt_center">0.6</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">50-69</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.68</td>
<td class="gt_row gt_center">0.41, 1.13</td>
<td class="gt_row gt_center">0.13</td>
<td class="gt_row gt_center">0.68</td>
<td class="gt_row gt_center">0.40, 1.13</td>
<td class="gt_row gt_center">0.14</td>
</tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">70+</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.53</td>
<td class="gt_row gt_center">0.07, 3.20</td>
<td class="gt_row gt_center">0.5</td>
<td class="gt_row gt_center">0.52</td>
<td class="gt_row gt_center">0.07, 3.19</td>
<td class="gt_row gt_center">0.5</td>
</tr>
</tbody>
<tfoot><tr class="gt_footnotes">
<td colspan="8">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks"><em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br></p>
      </td>
    </tr></tfoot>
</table></div>
</div>
</div>
<div id="gộp-bằng-package-dplyr" class="section level4 unnumbered">
<h4>Gộp bằng package <strong>dplyr</strong><a class="anchor" aria-label="anchor" href="#g%E1%BB%99p-b%E1%BA%B1ng-package-dplyr"><i class="fas fa-link"></i></a>
</h4>
<p>Một cách khác để gộp các kết quả đơn biến và đa biến từ các hàm <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>/<code>tidy()</code> bằng cách sử dụng các hàm kết nối từ package <strong>dplyr</strong>.</p>
<ul>
<li>Kết nối kết quả đơn biến trước đó (<code>univ_tab_base</code>, chứa được các cột đếm) với kết quả đa biến đã được làm gọn <code>mv_tab_base</code><br>
</li>
<li>Sử dụng hàm <code>select()</code> để giữ lại, sắp xếp lại thứ tự và đặt lại tên các cột mà chúng ta muốn<br>
</li>
<li>Sử dụng hàm <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> để làm tròn tất cả các cột với hai số thập phân</li>
</ul>
<div class="sourceCode" id="cb998"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## combine univariate and multivariable tables </span>
<span class="fu">left_join</span><span class="op">(</span><span class="va">univ_tab_base</span>, <span class="va">mv_tab_base</span>, by <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## choose columns and rename them</span>
  <span class="fu">select</span><span class="op">(</span> <span class="co"># new name =  old name</span>
    <span class="st">"characteristic"</span> <span class="op">=</span> <span class="va">term</span>, 
    <span class="st">"recovered"</span>      <span class="op">=</span> <span class="st">"0"</span>, 
    <span class="st">"dead"</span>           <span class="op">=</span> <span class="st">"1"</span>, 
    <span class="st">"univ_or"</span>        <span class="op">=</span> <span class="va">estimate.x</span>, 
    <span class="st">"univ_ci_low"</span>    <span class="op">=</span> <span class="va">conf.low.x</span>, 
    <span class="st">"univ_ci_high"</span>   <span class="op">=</span> <span class="va">conf.high.x</span>,
    <span class="st">"univ_pval"</span>      <span class="op">=</span> <span class="va">p.value.x</span>, 
    <span class="st">"mv_or"</span>          <span class="op">=</span> <span class="va">estimate.y</span>, 
    <span class="st">"mvv_ci_low"</span>     <span class="op">=</span> <span class="va">conf.low.y</span>, 
    <span class="st">"mv_ci_high"</span>     <span class="op">=</span> <span class="va">conf.high.y</span>,
    <span class="st">"mv_pval"</span>        <span class="op">=</span> <span class="va">p.value.y</span> 
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.double</span><span class="op">)</span>, <span class="va">round</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>   </code></pre></div>
<pre><code>## # A tibble: 20 x 11
##    characteristic recovered  dead univ_or univ_ci_low univ_ci_high univ_pval mv_or mvv_ci_low mv_ci_high mv_pval
##    &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1 (Intercept)          909  1168    1.28        1.18         1.4       0     1.07       0.83       1.39    0.6 
##  2 gender               916  1174    1           0.88         1.13      0.97  1          0.88       1.14    0.97
##  3 (Intercept)          340   436    1.28        1.11         1.48      0     1.07       0.83       1.39    0.6 
##  4 fever               1485  1906    1           0.85         1.17      0.99  1          0.86       1.18    0.96
##  5 (Intercept)         1472  1877    1.28        1.19         1.37      0     1.07       0.83       1.39    0.6 
##  6 chills               353   465    1.03        0.89         1.21      0.68  1.03       0.89       1.21    0.67
##  7 (Intercept)          272   309    1.14        0.97         1.34      0.13  1.07       0.83       1.39    0.6 
##  8 cough               1553  2033    1.15        0.97         1.37      0.11  1.15       0.96       1.37    0.12
##  9 (Intercept)         1636  2114    1.29        1.21         1.38      0     1.07       0.83       1.39    0.6 
## 10 aches                189   228    0.93        0.76         1.14      0.51  0.93       0.76       1.14    0.5 
## 11 (Intercept)          931  1144    1.23        1.13         1.34      0     1.07       0.83       1.39    0.6 
## 12 vomit                894  1198    1.09        0.96         1.23      0.17  1.09       0.96       1.23    0.17
## 13 (Intercept)          338   427    1.26        1.1          1.46      0     1.07       0.83       1.39    0.6 
## 14 age_cat5-9           365   433    0.94        0.77         1.15      0.54  0.94       0.77       1.15    0.53
## 15 age_cat10-14         273   396    1.15        0.93         1.42      0.2   1.15       0.93       1.41    0.2 
## 16 age_cat15-19         238   299    0.99        0.8          1.24      0.96  0.99       0.79       1.24    0.92
## 17 age_cat20-29         345   448    1.03        0.84         1.26      0.79  1.03       0.84       1.26    0.8 
## 18 age_cat30-49         228   307    1.07        0.85         1.33      0.58  1.06       0.85       1.33    0.61
## 19 age_cat50-69          35    30    0.68        0.41         1.13      0.13  0.68       0.4        1.13    0.14
## 20 age_cat70+             3     2    0.53        0.07         3.2       0.49  0.52       0.07       3.19    0.48</code></pre>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="biểu-đồ-forest-plot" class="section level2" number="19.5">
<h2>
<span class="header-section-number">19.5</span> Biểu đồ Forest plot<a class="anchor" aria-label="anchor" href="#bi%E1%BB%83u-%C4%91%E1%BB%93-forest-plot"><i class="fas fa-link"></i></a>
</h2>
<p>Phần này hướng dẫn cách tạo ra một biểu đồ của các kết quả hồi quy. Có hai lựa chọn để tạo biểu đồ, chúng ta có thể tự tạo một biểu đồ bằng cách sử dụng package <strong>ggplot2</strong> hoặc sử dụng một meta-package có tên <strong>easystats</strong> (một package gồm nhiều package).</p>
<p>Nếu chưa quen thuộc với gói lệnh tạo biểu đồ <strong>ggplot2</strong>, xem thêm chương <a href="ggplot-basics.html#ggplot-basics">ggplot cơ bản</a>.</p>
<!-- ======================================================= -->
<div id="ggplot2-package" class="section level3 unnumbered">
<h3>
<strong>ggplot2</strong> package<a class="anchor" aria-label="anchor" href="#ggplot2-package"><i class="fas fa-link"></i></a>
</h3>
<p>Bạn có thể xây dựng một forest plot với hàm <code>ggplot()</code> bằng cách vẽ các thành phần của kết quả hồi quy đa biến. Thêm các lớp của biều đồ bằng cách sử dụng các “geoms”:</p>
<ul>
<li>Các ước lượng bằng hàm <code>geom_point()</code><br>
</li>
<li>Khoảng tin cậy bằng hàm <code>geom_errorbar()</code><br>
</li>
<li>Đường thẳng đứng ở vị trí OR = 1 bằng hàm <code>geom_vline()</code>
</li>
</ul>
<p>Trước khi tạo biểu đồ, chúng ta sử dụng hàm <code>fct_relevel()</code> từ package <strong>forcats</strong> để đặt thứ tự các biến trên trục y. Hàm <code>ggplot()</code> cho phép hiển thị theo thứ tự chữ-số mà có thể không hiển thị tốt cho các giá trị của biến tuổi (“30” có thể hiển thị trước “5”). Xem chương <a href="factors.html#factors">Factors</a> để biết thêm chi tiết.</p>
<div class="sourceCode" id="cb1000"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## remove the intercept term from your multivariable results</span>
<span class="va">mv_tab_base</span> <span class="op">%&gt;%</span> 
  
  <span class="co">#set order of levels to appear along y-axis</span>
  <span class="fu">mutate</span><span class="op">(</span>term <span class="op">=</span> <span class="fu">fct_relevel</span><span class="op">(</span>
    <span class="va">term</span>,
    <span class="st">"vomit"</span>, <span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"cough"</span>, <span class="st">"chills"</span>, <span class="st">"aches"</span>,
    <span class="st">"age_cat5-9"</span>, <span class="st">"age_cat10-14"</span>, <span class="st">"age_cat15-19"</span>, <span class="st">"age_cat20-29"</span>,
    <span class="st">"age_cat30-49"</span>, <span class="st">"age_cat50-69"</span>, <span class="st">"age_cat70+"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  
  <span class="co"># remove "intercept" row from plot</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op">!=</span> <span class="st">"(Intercept)"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co">## plot with variable on the y axis and estimate (OR) on the x axis</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">estimate</span>, y <span class="op">=</span> <span class="va">term</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  
  <span class="co">## show the estimate as a point</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  
  <span class="co">## add in an error bar for the confidence intervals</span>
  <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>xmin <span class="op">=</span> <span class="va">conf.low</span>, xmax <span class="op">=</span> <span class="va">conf.high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  
  <span class="co">## show where OR = 1 is for reference as a dashed line</span>
  <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/ggplot_forest-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
<div id="easystats-packages" class="section level3 unnumbered">
<h3>
<strong>easystats</strong> packages<a class="anchor" aria-label="anchor" href="#easystats-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Lựa chọn thứ hai là sử dụng một sự kết hợp của các package trong <strong>easystats</strong>, nếu chúng ta không muốn mức độ kiểm soát chặt chẽ mà package <strong>ggplot2</strong> cung cấp.</p>
<p>Hàm <code>model_parameters()</code> từ package <strong>parameters</strong> thực hiện tương đương với hàm <code>tidy()</code> trong package <strong>broom</strong> . Sau đó, package <strong>see</strong> chấp nhận các kết quả đầu ra và tạo một biểu đồ forest plot mặc định giống như cho một đối tượng <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb1001"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">easystats</span><span class="op">)</span></code></pre></div>
<pre><code>## Installing package into 'C:/Users/MSFuser/Documents/R/win-library/4.1'
## (as 'lib' is unspecified)</code></pre>
<pre><code>## Warning: package 'easystats' is not available for this version of R
## 
## A version of this package for your version of R might be available elsewhere,
## see the ideas at
## https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages</code></pre>
<pre><code>## Warning: unable to access index for repository http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/4.1:
##   cannot open URL 'http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/4.1/PACKAGES'</code></pre>
<pre><code>## Warning in p_install(package, character.only = TRUE, ...):</code></pre>
<pre><code>## Warning in library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE, : there is no package called 'easystats'</code></pre>
<pre><code>## Warning in pacman::p_load(easystats): Failed to install/load:
## easystats</code></pre>
<div class="sourceCode" id="cb1008"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## remove the intercept term from your multivariable results</span>
<span class="va">final_mv_reg</span> <span class="op">%&gt;%</span> 
  <span class="fu">model_parameters</span><span class="op">(</span>exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/easystats_forest-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="nguồn-5" class="section level2" number="19.6">
<h2>
<span class="header-section-number">19.6</span> Nguồn<a class="anchor" aria-label="anchor" href="#ngu%E1%BB%93n-5"><i class="fas fa-link"></i></a>
</h2>
<p>Nội dung của chương này được tham khảo từ các nguồn sau:</p>
<p><a href="https://www.datacamp.com/community/tutorials/linear-regression-R">Linear regression in R</a></p>
<p><a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">gtsummary</a></p>
<p><a href="https://stats.idre.ucla.edu/other/dae/">UCLA stats page</a></p>
<p><a href="http://www.sthda.com/english/articles/36-classification-methods-essentials/150-stepwise-logistic-regression-essentials-in-r/">sthda stepwise regression</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="stat-tests.html"><span class="header-section-number">18</span> Các kiểm định thống kê cơ bản</a></div>
<div class="next"><a href="missing-data.html"><span class="header-section-number">20</span> Dữ liệu Missing</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#regression"><span class="header-section-number">19</span> Hồi quy đơn và đa biến</a></li>
<li>
<a class="nav-link" href="#chu%E1%BA%A9n-b%E1%BB%8B-9"><span class="header-section-number">19.1</span> Chuẩn bị</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#g%E1%BB%8Di-packages-5">Gọi packages</a></li>
<li><a class="nav-link" href="#nh%E1%BA%ADp-s%E1%BB%91-li%E1%BB%87u-1">Nhập số liệu</a></li>
<li><a class="nav-link" href="#l%C3%A0m-s%E1%BA%A1ch-s%E1%BB%91-li%E1%BB%87u">Làm sạch số liệu</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ph%C3%A2n-t%C3%ADch-%C4%91%C6%A1n-bi%E1%BA%BFn"><span class="header-section-number">19.2</span> Phân tích đơn biến</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#base-r-2">base R</a></li>
<li><a class="nav-link" href="#reg_gt_uni">gtsummary package</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ph%C3%A2n-t%C3%ADch-ph%C3%A2n-t%E1%BA%A7ng"><span class="header-section-number">19.3</span> Phân tích phân tầng</a></li>
<li>
<a class="nav-link" href="#ph%C3%A2n-t%C3%ADch-%C4%91a-bi%E1%BA%BFn"><span class="header-section-number">19.4</span> Phân tích đa biến</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#th%E1%BB%B1c-hi%E1%BB%87n-ph%C3%A2n-t%C3%ADch-%C4%91a-bi%E1%BA%BFn">Thực hiện phân tích đa biến</a></li>
<li><a class="nav-link" href="#g%E1%BB%99p-k%E1%BA%BFt-qu%E1%BA%A3-ph%C3%A2n-t%C3%ADch-%C4%91%C6%A1n-bi%E1%BA%BFn-v%C3%A0-%C4%91a-bi%E1%BA%BFn">Gộp kết quả phân tích đơn biến và đa biến</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#bi%E1%BB%83u-%C4%91%E1%BB%93-forest-plot"><span class="header-section-number">19.5</span> Biểu đồ Forest plot</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ggplot2-package">ggplot2 package</a></li>
<li><a class="nav-link" href="#easystats-packages">easystats packages</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ngu%E1%BB%93n-5"><span class="header-section-number">19.6</span> Nguồn</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Cẩm nang dịch tễ học với R</strong>" was written by the handbook team. It was last built on 2021-10-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
